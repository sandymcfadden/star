<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STAR Task Manager - Interview Prep & Career Achievement Tracker</title>
    <meta name="description" content="Organize your professional accomplishments using the STAR method. Perfect for job interview preparation with categories, search, and bulk import/export.">
    <meta name="keywords" content="STAR method, interview preparation, job interview, career achievements, task manager, accomplishments">
    <meta name="author" content="STAR Task Manager">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com/">
    <meta property="og:title" content="STAR Task Manager - Interview Prep Made Easy">
    <meta property="og:description" content="Organize your professional accomplishments using the STAR method. Perfect for job interview preparation with categories, search, and bulk import/export.">
    <meta property="og:image" content="https://yourdomain.com/og-image.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://yourdomain.com/">
    <meta property="twitter:title" content="STAR Task Manager - Interview Prep Made Easy">
    <meta property="twitter:description" content="Organize your professional accomplishments using the STAR method. Perfect for job interview preparation.">
    <meta property="twitter:image" content="https://yourdomain.com/og-image.png">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" href="favicon.ico">

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Skip to main content link for keyboard users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div id="mainContainer" class="container">
        <header>
            <h1>STAR Task Manager</h1>
            <nav aria-label="Main navigation">
                <div class="header-buttons">
                    <button
                        id="themeToggle"
                        class="theme-toggle"
                        type="button"
                        role="switch"
                        aria-checked="true"
                        aria-label="Toggle dark mode"
                        title="Toggle dark mode"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="moonIcon">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="sunIcon" style="display: none;">
                            <circle cx="12" cy="12" r="5"/>
                            <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2"/>
                            <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2"/>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2"/>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2"/>
                            <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2"/>
                            <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2"/>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2"/>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <div class="settings-dropdown">
                        <button id="settingsBtn" class="btn btn-secondary" aria-haspopup="true" aria-expanded="false">Settings â–¾</button>
                        <div class="settings-menu" id="settingsMenu" role="menu">
                            <button class="settings-menu-item" id="manageCategoriesBtn" role="menuitem">Manage Categories</button>
                            <button class="settings-menu-item" id="bulkAddBtn" role="menuitem">Bulk Import</button>
                            <button class="settings-menu-item" id="exportBtn" role="menuitem">Export All</button>
                        </div>
                    </div>
                    <button id="addTaskBtn" class="btn btn-primary">+ Add New Task</button>
                </div>
            </nav>
        </header>

        <main id="main-content">
            <section class="filter-section" aria-label="Filter and search">
                <div class="filter-row">
                    <div class="filter-category">
                        <label id="filter-label">Filter by category:</label>
                        <div class="filter-buttons" id="filterButtons" role="group" aria-labelledby="filter-label">
                            <!-- Filter buttons will be dynamically generated -->
                        </div>
                    </div>
                    <div class="search-box">
                        <label for="searchInput" class="visually-hidden">Search tasks</label>
                        <input type="text" id="searchInput" name="searchInput" placeholder="Search tasks..." aria-label="Search tasks">
                    </div>
                </div>
            </section>

            <section aria-label="Task list">
                <ul id="taskList" class="task-list"></ul>
                <!-- Live region for announcements -->
                <div id="announcements" class="visually-hidden" role="status" aria-live="polite" aria-atomic="true"></div>
            </section>
        </main>

        <footer class="app-footer">
            <p>
                Made by <strong>Sandy McFadden</strong>
            </p>
            <a href="https://github.com/sandymcfadden/star" target="_blank" rel="noopener noreferrer" class="github-link" aria-label="View source code on GitHub">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                </svg>
                <span>View on GitHub</span>
            </a>
        </footer>
    </div>

    <!-- Add/Edit Task Modal -->
    <div id="taskModal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Task</h2>
                <button class="close" aria-label="Close dialog">&times;</button>
            </div>
            <form id="taskForm">
                <div class="form-group">
                    <label for="taskTitle">Task Title:</label>
                    <input type="text" id="taskTitle" name="taskTitle" required>
                </div>
                <div class="form-group">
                    <label for="taskCategory">Task Category:</label>
                    <select id="taskCategory" name="taskCategory" required>
                        <!-- Categories populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="situation">Situation:</label>
                    <textarea id="situation" name="situation" rows="3" required aria-describedby="situation-help"></textarea>
                    <small id="situation-help" class="form-help">Describe the context or challenge</small>
                </div>
                <div class="form-group">
                    <label for="task">Task:</label>
                    <textarea id="task" name="task" rows="3" required aria-describedby="task-help"></textarea>
                    <small id="task-help" class="form-help">Explain what needed to be done</small>
                </div>
                <div class="form-group">
                    <label for="action">Action:</label>
                    <textarea id="action" name="action" rows="3" required aria-describedby="action-help"></textarea>
                    <small id="action-help" class="form-help">Detail the steps you took</small>
                </div>
                <div class="form-group">
                    <label for="result">Result:</label>
                    <textarea id="result" name="result" rows="3" required aria-describedby="result-help"></textarea>
                    <small id="result-help" class="form-help">Highlight the outcomes and impact</small>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bulk Import Modal -->
    <div id="bulkModal" class="modal" role="dialog" aria-labelledby="bulkModalTitle" aria-modal="true">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="bulkModalTitle">Bulk Import Tasks</h2>
                <button class="close-bulk" aria-label="Close dialog">&times;</button>
            </div>
            <div class="bulk-instructions">
                <p>Paste your tasks in the format below. Each task should have a title followed by <strong>**Situation:**</strong>, <strong>**Task:**</strong>, <strong>**Action:**</strong>, and <strong>**Result:**</strong> sections. Separate tasks with blank lines.</p>
            </div>
            <form id="bulkForm">
                <div class="form-group">
                    <label for="bulkCategory">Category for all tasks:</label>
                    <select id="bulkCategory" name="bulkCategory" required>
                        <!-- Categories populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="bulkText">Paste tasks here:</label>
                    <textarea id="bulkText" name="bulkText" rows="15" placeholder="Title of first task
**Situation:**
Description of the situation...
**Task:**
Description of the task...
**Action:**
Description of the action...
**Result:**
Description of the result...

Title of second task
**Situation:**
..." required></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBulkBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Import Tasks</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="modal" role="dialog" aria-labelledby="exportModalTitle" aria-modal="true">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="exportModalTitle">Export Tasks</h2>
                <button class="close-export" aria-label="Close dialog">&times;</button>
            </div>
            <div class="export-instructions">
                <p>Copy the text below. You can paste it back using the Bulk Import feature.</p>
            </div>
            <div class="form-group">
                <label for="exportText">Exported Tasks:</label>
                <textarea id="exportText" name="exportText" rows="20" readonly aria-readonly="true"></textarea>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="closeExportBtn">Close</button>
                <button type="button" class="btn btn-primary" id="copyExportBtn">Copy to Clipboard</button>
            </div>
        </div>
    </div>

    <!-- Category Management Modal -->
    <div id="categoryModal" class="modal" role="dialog" aria-labelledby="categoryModalTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="categoryModalTitle">Manage Categories</h2>
                <button class="close-category" aria-label="Close dialog">&times;</button>
            </div>
            <ul class="category-list" id="categoryList">
                <!-- Categories will be dynamically generated -->
            </ul>
            <div class="add-category-section">
                <h3>Add New Category</h3>
                <form id="categoryForm">
                    <div class="form-group">
                        <label for="categoryName">Category Name:</label>
                        <input type="text" id="categoryName" name="categoryName" required>
                    </div>
                    <div class="form-group">
                        <label for="categoryColor">Category Color:</label>
                        <input type="color" id="categoryColor" name="categoryColor" value="#3498db" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Add Category</button>
                    </div>
                </form>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="closeCategoryBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal" role="dialog" aria-labelledby="confirmModalTitle" aria-describedby="confirmModalMessage" aria-modal="true">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="confirmModalTitle">Confirm Action</h2>
            </div>
            <div class="confirm-message">
                <p id="confirmModalMessage"></p>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="confirmCancelBtn">Cancel</button>
                <button type="button" class="btn btn-primary" id="confirmOkBtn">OK</button>
            </div>
        </div>
    </div>

    <!-- Import idb library (local copy for offline use) -->
    <script src="idb.js"></script>
    <script src="db.js"></script>
    <script src="app.js"></script>
</body>
</html>
